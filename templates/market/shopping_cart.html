{% extends  'base.html' %}

{% load static %}

{% block main %}
<style>
    .product-list {
        margin-bottom: 40px;
        position: relative;
        width: 90%;
        left: 5%;
    }

    .product-list tr {
        padding: 5px;
        margin: 10px;
        min-height: 65px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-radius: 10px;
        box-shadow: 0 0 2px 0 rgba(0,0,0,.1), 0 2px 6px 0 rgba(0,0,0,.1);
        -webkit-box-shadow: 0 0 2px 0 rgba(0,0,0,.1), 0 2px 6px 0 rgba(0,0,0,.1);
    }

    .active-products-list td,.active-products-list th {
        width: 20%;
        text-align: center;
    }

    .products-history td, .products-history th {
        width: 33%;
        text-align: center;
    }

    @media (max-width: 992px) {
        .product-list {
            width: 100%;
            left: 0;
        }

        .active-products-list td:nth-child(1), .active-products-list th:nth-child(1) {
            display: none;
        }

        .active-products-list td,.active-products-list th {
            width: 25%;
            flex-direction: column;
        }

        .product-check-list-operation-btn {
            width: 100%;
            margin: 5px 0 !important;
        }

        .product-check-list-operation-btn button {
            width: 100px;
            margin: 0;
        }
    }

    .dropdown-menu.show {
        display: flex;
        align-items: center;
        flex-direction: column;
    }

</style>
    <h2 style="font-size: 40px;margin-top: 20px;" class="text-center">
        Корзина
    </h2>

    {% if shopping_cart_items %}
        <table class="product-list active-products-list p-0">
            <thead class="text-center">
                <tr style="box-shadow: 0 0 0 1px rgba(13,35,67,.07),0 5px 15px -4px rgba(13,35,67,.4);">
                    <th scope="col">Фото</th>
                    <th scope="col">Название товара</th>
                    <th scope="col">Количество</th>
                    <th scope="col">Цена за штуку</th>
                    <th scope="col">Стоимость</th>
                </tr>
            </thead>
            <tbody>
                {% for product in shopping_cart_items %}
                    <tr>
                        <td><img style="height: 70px;" src="{{ product.product.product_photo.url }}" alt="{{ product.product_name }}"></td>
                        <td>{{ product.product }}</td>
                        <td class="product-amount-btns">
                            <input type="button" class="amount-decrement" value="-">
                            <input type="number" min="0" value="{{ product.amount }}">
                            <input type="button" class="amount-increment" value="+">
                        </td>
                        <td>{{ product.product.price }} {{ product.product.plural_amount_name }}</td>
                        <td data-price-for-one-product="{{ product.price }}" class="total-price-label">{% widthratio product.product.price 1 product.amount %} {{ product.product.plural_amount_name }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
    <h4 style="font-weight: 300;" class="text-center">
        Корзина пуста
    </h4>
    {% endif %}

    <script>
        let shoppingCartRow = document.querySelectorAll("tbody tr");

        for (let i = 0; i < shoppingCartRow.length; i++) {
            let amountButtons = shoppingCartRow[i].querySelector(".product-amount-btns"),
                totalPriceLabel = shoppingCartRow[i].querySelector(".total-price-label");

            amountButtons.querySelector("input[type='number']").oncha

            amountButtons.querySelector(".amount-decrement").onclick = function () {

            }

        }

        document.querySelectorAll(".total-price-label");

    </script>

{% endblock %}
